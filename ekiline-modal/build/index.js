!function(){"use strict";function e(){return e=Object.assign||function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},e.apply(this,arguments)}var l=window.wp.element,o=window.wp.blocks,a=window.wp.blockEditor,t=window.wp.components,n=window.wp.i18n,i=window.wp.richText,r=window.wp.data;(0,o.registerBlockType)("ekiline-blocks/ekiline-modal",{apiVersion:2,title:(0,n.__)("Modal group, full control","ekiline-modal"),icon:"editor-kitchensink",description:(0,n.__)("Add your content here, then invoque with a link anchor #anchor.","ekiline-modal"),category:"design",supports:{anchor:!0},attributes:{modalShow:{type:"string",default:"default"},modalSize:{type:"string",default:"default"},modalAlign:{type:"boolean",default:!0},modalHeader:{type:"boolean",default:!1},modalFooter:{type:"boolean",default:!1},modalBackdrop:{type:"boolean",default:!0},modalKeyboard:{type:"boolean",default:!0},modalGrow:{type:"boolean",default:!1},modalTime:{type:"number",default:"5000"}},edit:e=>{const{attributes:o,setAttributes:i}=e,r=(0,a.useBlockProps)({className:"group-modal"});return(0,l.createElement)("div",r,(0,l.createElement)(a.InspectorControls,null,(0,l.createElement)(t.PanelBody,{title:(0,n.__)("Modal Params","ekiline-modal"),initialOpen:!0},(0,l.createElement)(t.SelectControl,{label:(0,n.__)("Rise modal","ekiline-modal"),value:o.modalShow,options:[{label:(0,n.__)("Default","ekiline-modal"),value:""},{label:(0,n.__)("Right","ekiline-modal"),value:" right-aside"},{label:(0,n.__)("Bottom","ekiline-modal"),value:" move-from-bottom"},{label:(0,n.__)("Left","ekiline-modal"),value:" left-aside"}],onChange:e=>i({modalShow:e})}),(0,l.createElement)(t.SelectControl,{label:(0,n.__)("Size modal","ekiline-modal"),value:o.modalSize,options:[{label:(0,n.__)("Default","ekiline-modal"),value:""},{label:(0,n.__)("Small","ekiline-modal"),value:" modal-sm"},{label:(0,n.__)("Large","ekiline-modal"),value:" modal-lg"},{label:(0,n.__)("Extra Large","ekiline-modal"),value:" modal-xl"},{label:(0,n.__)("Full window","ekiline-modal"),value:" modal-fullscreen"}],onChange:e=>i({modalSize:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Center in window","ekiline-modal"),checked:o.modalAlign,onChange:e=>i({modalAlign:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Hide header","ekiline-modal"),checked:o.modalHeader,onChange:e=>i({modalHeader:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Hide footer","ekiline-modal"),checked:o.modalFooter,onChange:e=>i({modalFooter:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Enable background click to close","ekiline-modal"),checked:o.modalBackdrop,onChange:e=>i({modalBackdrop:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Enable ESC key to close","ekiline-modal"),checked:o.modalKeyboard,onChange:e=>i({modalKeyboard:e})}),(0,l.createElement)(t.ToggleControl,{label:(0,n.__)("Show resize modal button","ekiline-modal"),checked:o.modalGrow,onChange:e=>i({modalGrow:e})}))),(0,l.createElement)(a.InnerBlocks,{allowedBlocks:["ekiline-blocks/ekiline-modal-header","ekiline-blocks/ekiline-modal-body","ekiline-blocks/ekiline-modal-footer"],template:[["ekiline-blocks/ekiline-modal-header",{lock:{remove:!1,move:!0}}],["ekiline-blocks/ekiline-modal-body",{lock:{remove:!1,move:!0}}],["ekiline-blocks/ekiline-modal-footer",{lock:{remove:!1,move:!0}}]]}),(0,l.createElement)((function(){return o.anchor?(0,l.createElement)("div",{class:"editor-modal-route has-anchor"},(0,l.createElement)("pre",null,(0,n.__)("Hint: include these attributes in links to open or close this modal (advanced).","ekiline-modal"),(0,l.createElement)("br",null),"Open modal: ",(0,l.createElement)("span",null,'href="',"#"+o.anchor,'" data-bs-target="',"#"+o.anchor,'" data-bs-toggle="modal"'),(0,l.createElement)("br",null),"Close modal: ",(0,l.createElement)("span",null,'href="',"#"+o.anchor,'" data-bs-dismiss="modal"'))):(0,l.createElement)("div",{class:"editor-modal-route"},(0,n.__)("Do not forget to add an anchor. ","ekiline-modal"))}),null))},save:o=>{let{attributes:t}=o;const i=a.useBlockProps.save({className:"group-modal modal fade"+("default"!=t.modalShow?t.modalShow:""),"data-bs-backdrop":t.modalBackdrop,"data-bs-keyboard":t.modalKeyboard}),r=a.useBlockProps.save({className:"modal-dialog"+(t.modalAlign?" modal-dialog-centered":"")+("default"!=t.modalSize?t.modalSize:"")});return(0,l.createElement)("div",e({},i,{tabindex:"-1",role:"dialog","aria-labelledby":i.id+"Label","aria-hidden":"true"}),(0,l.createElement)("div",{class:r.className},(0,l.createElement)("div",{class:"modal-content"},(0,l.createElement)((function(){if(t.modalGrow)return(0,l.createElement)("button",{type:"button",class:"modal-resize btn btn-sm btn-outline-secondary","aria-label":(0,n.__)("play btn","ekiline-modal")},(0,l.createElement)("span",{class:"dashicons dashicons-editor-expand"}))}),null),(0,l.createElement)(a.InnerBlocks.Content,null))))}}),(0,o.registerBlockType)("ekiline-blocks/ekiline-modal-header",{title:(0,n.__)("Modal header","ekiline-modal"),parent:["ekiline-blocks/ekiline-modal"],icon:"feedback",description:(0,n.__)("Modal header content. ","ekiline-modal"),category:"design",supports:{html:!1,reusable:!1,multiple:!1,inserter:!0},edit:()=>{const e=[["core/heading",{content:(0,n.__)("Add modal title","ekiline-modal"),level:4}]],o=(0,a.useBlockProps)({className:"editor-modal-header"});return(0,l.createElement)("div",o,(0,l.createElement)(a.InnerBlocks,{allowedBlocks:["core/heading","core/paragraph"],template:e}))},save:()=>{const e=a.useBlockProps.save({className:"modal-header"});return(0,l.createElement)("div",e,(0,l.createElement)(a.InnerBlocks.Content,null),(0,l.createElement)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}))}}),(0,o.registerBlockType)("ekiline-blocks/ekiline-modal-body",{title:(0,n.__)("Modal body content","ekiline-modal"),parent:["ekiline-blocks/ekiline-modal"],icon:"feedback",description:(0,n.__)("Modal body content. ","ekiline-modal"),category:"design",supports:{html:!1,reusable:!1,multiple:!1,inserter:!0},edit:()=>{const e=[["core/paragraph",{content:(0,n.__)("Add modal content blocks","ekiline-modal")}]],o=(0,a.useBlockProps)({className:"editor-modal-body"});return(0,l.createElement)("div",o,(0,l.createElement)(a.InnerBlocks,{template:e}))},save:()=>{const e=a.useBlockProps.save({className:"modal-body"});return(0,l.createElement)("div",e,(0,l.createElement)(a.InnerBlocks.Content,null))}}),(0,o.registerBlockType)("ekiline-blocks/ekiline-modal-footer",{title:(0,n.__)("Modal footer","ekiline-modal"),parent:["ekiline-blocks/ekiline-modal"],icon:"feedback",description:(0,n.__)("Inner footer content. ","ekiline-modal"),category:"design",supports:{html:!1,reusable:!1,multiple:!1,inserter:!0},edit:()=>{const e=[["core/paragraph",{content:(0,n.__)("Add modal footer text","ekiline-modal")}]],o=(0,a.useBlockProps)({className:"editor-modal-footer"});return(0,l.createElement)("div",o,(0,l.createElement)(a.InnerBlocks,{allowedBlocks:["core/paragraph","core/buttons","core/button"],template:e}))},save:()=>{const e=a.useBlockProps.save({className:"modal-footer"});return(0,l.createElement)("div",e,(0,l.createElement)(a.InnerBlocks.Content,null))}}),(0,o.registerBlockCollection)("ekiline-blocks",{title:"Ekiline Blocks",icon:"layout"}),(0,i.registerFormatType)("ekiline-custom-format/open-modal-link",{title:"Open modal link",tagName:"samp",className:null,attributes:{"data-bs-toggle":null,"data-bs-target":null,type:null},edit:function(e){let{isActive:o,onChange:t,value:n}=e;const d=(0,r.useSelect)((e=>e("core/block-editor").getSelectedBlock()),[]);return d&&"core/button"!==d.name?null:(0,l.createElement)(a.RichTextToolbarButton,{icon:"editor-code",title:"Open modal link",onClick:()=>{t((0,i.toggleFormat)(n,{type:"ekiline-custom-format/open-modal-link",attributes:{"data-bs-toggle":"modal","data-bs-target":"#link",type:"button"}}))},isActive:o})}})}();